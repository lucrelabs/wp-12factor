!function(t,e){var s={cache:function(){s.els={date_picker:t("#jckwds-delivery-date"),date_ymd:t("#jckwds-delivery-date-ymd"),timeslot_select:t("#jckwds-delivery-time"),date_changed:t("#jckwds-date-changed")},s.vars={}},on_load:function(){s.cache(),s.setup_date_picker(),s.watch_for_change(),s.watch_for_submit()},setup_date_picker:function(){s.els.date_picker.length<=0||s.els.date_picker.datepicker({minDate:"+"+iconic_wds_vars.settings.datesettings_datesettings_minimum+"D",maxDate:"+"+iconic_wds_vars.settings.datesettings_datesettings_maximum+"D",beforeShowDay:function(e){var s=t.datepicker.formatDate("yy-mm-dd",e);return-1!==t.inArray(s,iconic_wds_vars.bookable_dates)?[!0,"","Available"]:[!1,"","unAvailable"]},dateFormat:iconic_wds_vars.settings.datesettings_datesettings_dateformat,onSelect:function(e,i){if(t(this).trigger("change"),""!==this.value){var a=[s.pad_left(i.selectedYear,4),s.pad_left(i.selectedMonth+1,2),s.pad_left(i.selectedDay,2)].join("");s.els.date_ymd.val(a),iconic_wds_vars.settings.timesettings_timesettings_setup_enable&&s.update_timeslot_options(a)}},monthNames:iconic_wds_vars.strings.months,monthNamesShort:iconic_wds_vars.strings.months_short,dayNames:iconic_wds_vars.strings.days,dayNamesMin:iconic_wds_vars.strings.days_short})},update_timeslot_options:function(e,i){var a=s.els.timeslot_select.find("option:eq(0)");s.els.timeslot_select.find("option:gt(0)").remove(),a.text(iconic_wds_vars.strings.loading);var n={action:"iconic_wds_get_slots_on_date",nonce:iconic_wds_vars.ajax_nonce,date:e};t.post(iconic_wds_vars.ajax_url+"?post="+iconic_wds_vars.order_id,n,function(t){!0===t.success?(a.text(iconic_wds_vars.strings.selectslot),s.els.timeslot_select.append(t.html)):a.text(iconic_wds_vars.strings.noslots),void 0!==i&&i(t)})},pad_left:function(t,e,s){return new Array(e-String(t).length+1).join(s||"0")+t},watch_for_change:function(){s.els.date_picker.add(s.els.date_ymd).add(s.els.timeslot_select).on("change",function(){s.els.date_changed.val(1)})},watch_for_submit:function(){s.els.timeslot_select.length<=0||t("form#post").submit(function(t){var e=parseInt(s.els.date_changed.val()),i=s.els.timeslot_select.val();1===parseInt(iconic_wds_vars.settings.timesettings_timesettings_setup_mandatory)&&e&&i.length<=0&&(alert(iconic_wds_vars.strings.selectslot),t.preventDefault())})}};t(window).load(s.on_load)}(jQuery,document);